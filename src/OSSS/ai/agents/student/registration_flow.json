{
  "id": "dcg_registration_v1",
  "slots": [
    "student_documents_confirmed",
    "school_year",
    "parent_first_name",
    "parent_last_name",
    "parent_email",
    "student_has_attended_before"
  ],
  "steps": [
    {
      "id": "documents",
      "slot": "student_documents_confirmed",
      "type": "yes_no",
      "prompt": "Before we proceed, please confirm that you have the required documents:\n\n**Documents Needed:**\n• Proof of residency (utility bill, lease agreement, mortgage, or property tax)\n• Proof of birth (birth certificate or other proof)\n• Immunization records (or valid exemption)\n• Parent/guardian photo ID (required for new families)\n• Home Language Survey\n• Medication Authorization Form (if needed)\n\n**Do you have these documents ready to continue?**\n\n1. Yes, I have these documents in a format ready for upload\n2. No, I do not have these documents yet\n\nReply with **1** or **2**.",
      "retry_prompt": "I wasn't able to tell whether you selected **Yes** or **No**.\n\nDo you have the required documents ready?\n\n1. Yes, I have these documents\n2. No, I do not have these documents yet\n\nReply with **1** or **2**.",
      "parser": "yes_no_numeric",
      "on_result": {
        "true": "school_year",
        "false": "documents_blocked"
      }
    },
    {
      "id": "documents_blocked",
      "slot": null,
      "type": "info",
      "prompt": "No problem — you'll need these documents before completing registration.\n\nWhen you have them ready, reply with:\n**1** — Yes, I have these documents.\n\nPlease reply when you're ready to proceed.",
      "next": "documents"
    },
    {
      "id": "school_year",
      "slot": "school_year",
      "type": "choice_or_text",
      "prompt": "Great — you're registering a **new student**.\n\n**What school year are you registering for?**\n\n{{school_year_menu}}\n\nReply with the **number** of your choice (e.g., 1), or type the school year (e.g., \"2025-26\").",
      "retry_prompt": "I wasn't able to tell which **school year** you selected.\n\nPlease reply with the **number** of your choice, or type the school year directly.\n\n{{school_year_menu}}\n\nExamples of valid replies:\n- `1`\n- `2025-26`",
      "parser": "school_year_choice",
      "next": "parent_first_name"
    },
    {
      "id": "parent_first_name",
      "slot": "parent_first_name",
      "type": "text",
      "prompt": "Thanks! We'll use **{{school_year}}** as the registration year.\n\nNow, please enter the **Parent/Guardian First Name** for this student.",
      "retry_prompt": "I didn't catch the **Parent/Guardian First Name**.\n\nPlease enter just the first name (for example: `Alex`).",
      "parser": "non_empty_text",
      "next": "parent_last_name"
    },
    {
      "id": "parent_last_name",
      "slot": "parent_last_name",
      "type": "text",
      "prompt": "Thanks, **{{parent_first_name}}**.\n\nNow, please enter the **Parent/Guardian Last Name** for this student.",
      "retry_prompt": "I didn't catch the **Parent/Guardian Last Name**.\n\nPlease enter just the last name (for example: `Johnson`).",
      "parser": "non_empty_text",
      "next": "parent_email"
    },
    {
      "id": "parent_email",
      "slot": "parent_email",
      "type": "text",
      "prompt": "Thanks, **{{parent_first_name}} {{parent_last_name}}**.\n\nNow, please enter the **Parent/Guardian Email Address** for this student. We'll use this for registration notifications.",
      "retry_prompt": "That doesn't look like a valid email address.\n\nPlease enter a valid email (for example: `johndoe@gmail.com`).",
      "parser": "email",
      "next": "student_attended"
    },
    {
      "id": "student_attended",
      "slot": "student_has_attended_before",
      "type": "yes_no",
      "prompt": "Has any student you are registering **attended DC-G Schools in the past**?\n\n1. Yes, at least one student has attended DC-G Schools before\n2. No, none of the students have attended DC-G Schools before\n\nReply with the **number** of your choice: 1 or 2.",
      "retry_prompt": "I wasn't able to tell if you selected **Yes** or **No**.\n\nHas any student you are registering attended DC-G Schools in the past?\n\n1. Yes, at least one student has attended DC-G Schools before\n2. No, none of the students have attended DC-G Schools before\n\nReply with the **number** of your choice: 1 or 2.",
      "parser": "yes_no_numeric",
      "next": null
    }
  ]
}
