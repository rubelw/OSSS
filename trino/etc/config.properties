##########################################
# Coordinator and Scheduling
##########################################
coordinator=true
node-scheduler.include-coordinator=false

##########################################
# HTTP / HTTPS Listeners
##########################################
# Internal HTTP (for discovery & workers)
http-server.http.enabled=true
http-server.http.port=8080

# External HTTPS (for users + OAuth2)
http-server.https.enabled=true
http-server.https.port=8443
http-server.https.keystore.path=/etc/trino/keystore/trino-keystore.p12
http-server.https.keystore.key=changeit

# Discovery must point to internal listener
discovery.uri=http://localhost:8080

##########################################
# Authentication (Keycloak OIDC / OAuth2)
##########################################
# Required OAuth2 bits
http-server.authentication.type=oauth2
http-server.authentication.oauth2.client-id=trino
http-server.authentication.oauth2.client-secret=password
http-server.authentication.oauth2.scopes=openid,profile,email
http-server.authentication.oauth2.issuer=http://keycloak.local:8080/realms/OSSS

# Choose the username field from the token (optional but handy)
http-server.authentication.oauth2.principal-field=preferred_username

# If you terminate TLS in a proxy and forward to HTTP, uncomment:
# http-server.process-forwarded=true

##########################################
# Web UI auth (required to use OAuth2 in UI)
#####

# --- Internal communication auth (required when auth is enabled) ---
internal-communication.shared-secret=3H1pHXaRiMIkcXUWJrPL5+dkBl3HNQr+mupaSMQDPuGrNQqKZCs4l9lPQYnx8BaB
